{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/api.ts","webpack:///./src/random.ts","webpack:///./src/components/Title.tsx","webpack:///./src/components/TodoForm.tsx","webpack:///./src/components/EmptyTodos.tsx","webpack:///./src/components/LoadingTodos.tsx","webpack:///./src/components/Todo.tsx","webpack:///./src/index.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","1","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Doc","next","seed","stats","done","total","className","isEditing","onChange","onSubmit","type","event","target","onClick","disabled","isFav","isDone","text","onEdit","onToggleFav","onToggleDone","onRemove","href","icon","_id","withFallback","_rev","Response","ok","id","rev","Action","Add","Change","Load","Remove","Update","load","send","total_rows","offset","rows","doc","todo","del","response","put","encode","changes$","Subject","lastSeq$","BehaviorSubject","isRunning$","poll$","from","json","body","results","forEach","changes","_deleted","seq","decode","last_seq","isRunning","empty","subscribe","v1","msecs","ordTodoText","ordTodoIsDone","ordTodo","concat","sortTodos","groupTasksBy","currentLens","fromProp","currentTextLens","composeLens","seedLens","todosLens","todosOptional","composePrism","some","at","String","Api","Edit","ToggleDone","ToggleFav","UpdateText","app","programWithFlags","flags","init","current","todos","map","action","model","match","none","modify","set","change","docs","row","updated","default","values","filter","dispatch","run","Date","now","Math","random","dom","document","getElementById"],"mappings":"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","file":"main.59ee9a932b342b203fda.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t1: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([161,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { Union, of } from 'ts-union'\nimport * as t from 'io-ts'\nimport { cmd, http } from 'effe-ts'\nimport { withFallback } from 'io-ts-types/lib/withFallback'\nimport { Observable, Subject, BehaviorSubject, empty, from } from 'rxjs'\nimport { fromFetch } from 'rxjs/fetch'\nimport * as E from 'fp-ts/lib/Either'\nimport * as rx from 'rxjs/operators'\nimport { pipe } from 'fp-ts/lib/pipeable'\n\nexport const Todo = t.interface(\n  {\n    _id: t.string,\n    text: t.string,\n    isDone: t.boolean,\n    isFav: withFallback(t.boolean, false)\n  },\n  'Todo'\n)\nexport type Todo = t.TypeOf<typeof Todo>\n\nexport const Document = <A, O>(Doc: t.Type<A, O>) =>\n  t.intersection([\n    t.interface({\n      _rev: t.string\n    }),\n    Doc\n  ])\nexport type Document<D> = D & { _rev: string }\n\nexport const AllDocsResponse = <A, O>(Doc: t.Type<A, O>) =>\n  t.interface(\n    {\n      total_rows: t.Int,\n      offset: t.Int,\n      rows: t.array(\n        t.interface({\n          id: t.string,\n          key: t.string,\n          doc: Document(Doc),\n          value: t.interface({\n            rev: t.string\n          })\n        })\n      )\n    },\n    'AllDocsResponse'\n  )\nexport interface AllDocsResponse<D> {\n  total_rows: t.Int\n  offset: t.Int\n  rows: {\n    id: string\n    key: string\n    doc: Document<D>\n    value: {\n      rev: string\n    }\n  }[]\n}\n\nexport const Response = t.interface(\n  {\n    ok: t.boolean,\n    id: t.string,\n    rev: t.string\n  },\n  'Response'\n)\nexport type Response = t.TypeOf<typeof Response>\n\nexport const Change = <A, O>(Doc: t.Type<A, O>) =>\n  t.interface({\n    changes: t.array(t.interface({ rev: t.string })),\n    doc: t.union([\n      t.interface({\n        _id: t.string,\n        _rev: t.string,\n        _deleted: t.literal(true)\n      }),\n      Document(Doc)\n    ]),\n    id: t.string,\n    seq: t.Int\n  })\nexport interface Change<D> {\n  changes: { rev: string }[]\n  doc: { _id: string; _rev: string; _deleted: true } | Document<D>\n  id: string\n  seq: t.Int\n}\n\nexport const Action = Union({\n  Add: of<{ todo: Todo; response: http.HttpResponseEither<Response> }>(),\n  Change: of<E.Either<t.Errors, Change<Todo>>>(),\n  Load: of<http.HttpResponseEither<AllDocsResponse<Todo>>>(),\n  Remove: of<{ todo: Todo; response: http.HttpResponseEither<Response> }>(),\n  Update: of<{ todo: Todo; response: http.HttpResponseEither<Response> }>()\n})\nexport type Action = typeof Action.T\n\nexport const load: cmd.Cmd<Action> = http.send(http.get('/todos/_all_docs?include_docs=true', AllDocsResponse(Todo)), Action.Load)\nexport const add = (todo: Todo) =>\n  http.send(http.put(`/todos/${todo._id}`, Todo.encode(todo), Response), response => Action.Add({ todo, response }))\nexport const remove = (todo: Document<Todo>) =>\n  http.send(http.del(`/todos/${todo._id}?_rev=${todo._rev}`, Response), response => Action.Remove({ todo, response }))\nexport const update = (todo: Document<Todo>) =>\n  http.send(http.put(`/todos/${todo._id}?rev=${todo._rev}`, Document(Todo).encode(todo), Response), response =>\n    Action.Update({ todo, response })\n  )\n\nconst changes$ = new Subject<Action>()\nconst lastSeq$ = new BehaviorSubject<string | t.Int>('now')\nconst isRunning$ = new BehaviorSubject(false)\n\nconst poll$: Observable<void> = pipe(\n  fromFetch(`/todos/_changes?feed=longpoll&include_docs=true&since=${lastSeq$.value}`),\n  rx.switchMap(response => from(response.json())),\n  rx.tap(body => {\n    body.results.forEach((result: unknown) => changes$.next(Action.Change(Change(Todo).decode(result))))\n    lastSeq$.next(body.last_seq)\n  }),\n  rx.switchMap(() => poll$)\n)\n\npipe(\n  isRunning$,\n  rx.distinctUntilChanged(),\n  rx.switchMap(isRunning => (isRunning ? poll$ : empty()))\n).subscribe()\n\nexport const changes = {\n  start: (): Observable<Action> => {\n    isRunning$.next(true)\n    return changes$\n  },\n  stop: (): Observable<Action> => {\n    isRunning$.next(false)\n    return empty()\n  }\n}\n","export const seed = (init: number): number => {\n  const result = init % 2147483647\n  return result <= 0 ? result + 2147483646 : result\n}\n\nexport const next = (seed: number) => (seed * 16807) % 2147483647\n","import * as O from 'fp-ts/lib/Option'\nimport { pipe } from 'fp-ts/lib/pipeable'\nimport * as React from 'react'\n\nexport interface Stats {\n  done: number\n  total: number\n}\n\nexport interface Props {\n  stats: O.Option<Stats>\n}\n\nexport const Title: React.FunctionComponent<Props> = ({ stats }: Props) => (\n  <>\n    Simple Todo&nbsp;\n    {pipe(\n      stats,\n      O.fold(\n        () => null,\n        ({ done, total }) => (\n          <span className=\"text-muted small\">\n            {done} / {total}\n          </span>\n        )\n      )\n    )}\n  </>\n)\n","import * as React from 'react'\n\nexport interface Props {\n  isEditing: boolean\n  value: string\n  onChange: (text: string) => void\n  onSubmit: () => void\n}\n\nexport const TodoForm: React.FunctionComponent<Props> = ({ isEditing, value, onChange, onSubmit }: Props) => (\n  <div className=\"input-group\">\n    <input type=\"text\" className=\"form-control\" name=\"task\" value={value} onChange={event => onChange(event.target.value)} />\n    <div className=\"input-group-append\">\n      <button type=\"submit\" className=\"btn btn-primary\" onClick={onSubmit} disabled={value === ''}>\n        {isEditing ? 'Edit' : 'Add'}\n      </button>\n    </div>\n  </div>\n)\n","import * as React from 'react'\n\nexport const EmptyTodos: React.FunctionComponent = () => (\n  <li className=\"list-group-item\">\n    <em>Task list is empty.</em>\n  </li>\n)\n","import * as React from 'react'\n\nexport const LoadingTodos: React.FunctionComponent = () => (\n  <li className=\"list-group-item\">\n    <em>Loading Tasks...</em>\n  </li>\n)\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faEdit, faCheckSquare, faStar, faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { faSquare, faStar as faStarEmpty } from '@fortawesome/free-regular-svg-icons'\nimport * as React from 'react'\n\nexport interface Props {\n  isFav: boolean\n  isDone: boolean\n  text: string\n\n  onToggleFav: () => void\n  onToggleDone: () => void\n  onEdit: () => void\n  onRemove: () => void\n}\n\nexport const Todo: React.FunctionComponent<Props> = ({ isFav, isDone, text, onEdit, onToggleFav, onToggleDone, onRemove }) => (\n  <li className=\"task-container list-group-item d-flex justify-content-between align-items-center\">\n    <div>\n      <a href=\"#\" className=\"btn-left\" onClick={onToggleFav}>\n        <FontAwesomeIcon icon={isFav ? faStar : faStarEmpty} />\n      </a>\n      <a href=\"#\" className=\"btn-left\" onClick={onToggleDone}>\n        <FontAwesomeIcon icon={isDone ? faCheckSquare : faSquare} />\n      </a>\n      {!isDone ? text : <del className=\"text-muted\">{text}</del>}\n    </div>\n    <div>\n      <a href=\"#\" className=\"btn-right\" onClick={onEdit}>\n        <FontAwesomeIcon icon={faEdit} />\n      </a>\n      <a href=\"#\" className=\"btn-right\" onClick={onRemove}>\n        <FontAwesomeIcon icon={faTimes} />\n      </a>\n    </div>\n  </li>\n)\n","import { contramap, ordBoolean, ordString, getSemigroup } from 'fp-ts/lib/Ord'\nimport * as R from 'fp-ts/lib/Record'\nimport { pipe } from 'fp-ts/lib/pipeable'\nimport { atRecord } from 'monocle-ts/es6/At/Record'\nimport { Prism, Lens } from 'monocle-ts/es6'\nimport * as E from 'fp-ts/lib/Either'\nimport { getFirstSemigroup } from 'fp-ts/lib/Semigroup'\nimport * as A from 'fp-ts/lib/Array'\nimport { cmd, html, platform } from 'effe-ts'\nimport { Union, of } from 'ts-union'\nimport * as O from 'fp-ts/lib/Option'\nimport * as NEA from 'fp-ts/lib/NonEmptyArray'\nimport * as rx from 'rxjs/operators'\nimport * as random from './random'\nimport { Title } from './components/Title'\nimport { TodoForm } from './components/TodoForm'\nimport { EmptyTodos } from './components/EmptyTodos'\nimport { LoadingTodos } from './components/LoadingTodos'\nimport { Todo } from './components/Todo'\nimport * as api from './api'\nimport uuid from 'uuid'\nimport * as ReactDOM from 'react-dom'\nimport * as React from 'react'\n\n// Function for creating an empty task\nconst emptyTodo = (seed: number): api.Todo => ({\n  _id: uuid.v1({ msecs: seed }),\n  text: '',\n  isDone: false,\n  isFav: false\n})\n\n// Define how tasks should be ordered\nconst ordTodoText = contramap<string, api.Document<api.Todo>>(todo => todo.text)(ordString) // Order by text\nconst ordTodoIsDone = contramap<boolean, api.Document<api.Todo>>(todo => todo.isDone)(ordBoolean) // Order by isDone\nconst ordTodo = getSemigroup<api.Document<api.Todo>>().concat(ordTodoIsDone, ordTodoText) // Combine both ordering strategies\nconst sortTodos = A.sort(ordTodo)\n\n// Util\nconst groupTasksBy = R.fromFoldableMap(getFirstSemigroup<api.Document<api.Todo>>(), A.array)\n\n// The single state tree used by the application\ninterface Model {\n  seed: number\n  current: api.Document<api.Todo> | api.Todo\n  todos: O.Option<Record<string, api.Document<api.Todo>>>\n}\n\n// Lenses for the `Model`\nconst currentLens = Lens.fromProp<Model>()('current')\nconst currentTextLens = currentLens.composeLens(Lens.fromProp<api.Document<api.Todo> | api.Todo>()('text'))\nconst seedLens = Lens.fromProp<Model>()('seed')\nconst todosLens = Lens.fromProp<Model>()('todos')\nconst todosOptional = todosLens.composePrism(Prism.some())\nconst todoByIdOptional = (id: string) =>\n  todosOptional.composeLens(atRecord<api.Document<api.Todo>>().at(String(id))).composePrism(Prism.some())\nconst todoByIdOptionalRev = (id: string) => todoByIdOptional(id).composeLens(Lens.fromProp<api.Document<api.Todo>>()('_rev'))\n\n// All actions that can happen in our application\nconst Action = Union({\n  Api: of<api.Action>(),\n  Add: of(),\n  Edit: of<{ todo: api.Document<api.Todo> }>(),\n  ToggleDone: of<{ todo: api.Document<api.Todo> }>(),\n  ToggleFav: of<{ todo: api.Document<api.Todo> }>(),\n  Remove: of<{ todo: api.Document<api.Todo> }>(),\n  UpdateText: of<{ text: string }>()\n})\ntype Action = typeof Action.T\n\ninterface Flags {\n  seed: number\n}\n\n// Generate the initial state of our application and trigger a command if wanted\nconst init = (flags: Flags): [Model, cmd.Cmd<Action>] => {\n  const seed = random.seed(flags.seed)\n  return [\n    {\n      seed: random.next(seed),\n      current: emptyTodo(seed),\n      todos: O.none\n    },\n    pipe(\n      api.load,\n      cmd.map(Action.Api)\n    )\n  ]\n}\n\nconst update = (action: Action, model: Model): [Model, cmd.Cmd<Action>] =>\n  Action.match(action, {\n    Api: action =>\n      api.Action.match(action, {\n        Add: ({ todo, response }) =>\n          pipe(\n            response,\n            E.fold(\n              () => [model, cmd.none],\n              response => [\n                pipe(\n                  model,\n                  seedLens.modify(random.next),\n                  currentLens.set(emptyTodo(model.seed)),\n                  todosOptional.modify(\n                    R.insertAt(response.body.id, {\n                      ...todo,\n                      _rev: response.body.rev\n                    })\n                  )\n                ),\n                cmd.none\n              ]\n            )\n          ),\n        Change: change =>\n          pipe(\n            change,\n            O.fromEither,\n            O.map(change => change.doc),\n            O.filter((doc): doc is api.Document<api.Todo> => !('_deleted' in doc)),\n            O.fold(\n              () => [model, cmd.none],\n              doc => [\n                pipe(\n                  model,\n                  todosOptional.modify(R.insertAt(doc._id, doc))\n                ),\n                cmd.none\n              ]\n            )\n          ),\n        Load: response =>\n          pipe(\n            response,\n            E.fold(\n              // If the response is an error do nothing by returning the current model\n              () => [model, cmd.none],\n              // Else evaluate the http response\n              response => {\n                const docs = response.body.rows.map(row => row.doc)\n                const todos = groupTasksBy(docs, todo => [todo._id, todo])\n                return [\n                  pipe(\n                    model,\n                    todosLens.set(O.some(todos))\n                  ),\n                  cmd.none\n                ]\n              }\n            )\n          ),\n        Remove: ({ todo, response }) =>\n          pipe(\n            response,\n            E.fold(\n              () => [model, cmd.none],\n              () => [\n                pipe(\n                  model,\n                  todosOptional.modify(R.deleteAt(todo._id))\n                ),\n                cmd.none\n              ]\n            )\n          ),\n        Update: ({ todo, response }) =>\n          pipe(\n            response,\n            E.fold(\n              () => [model, cmd.none],\n              response => [\n                pipe(\n                  model,\n                  todoByIdOptionalRev(todo._id).set(response.body.rev)\n                ),\n                cmd.none\n              ]\n            )\n          )\n      }),\n    Add: () => [\n      pipe(\n        model,\n        seedLens.modify(random.next),\n        currentLens.set(emptyTodo(model.seed))\n      ),\n      pipe(\n        api.add(model.current),\n        cmd.map(Action.Api)\n      )\n    ],\n    Edit: ({ todo }) => [\n      pipe(\n        model,\n        currentLens.set(todo)\n      ),\n      cmd.none\n    ],\n    ToggleDone: ({ todo }) => {\n      const updated = { ...todo, isDone: !todo.isDone }\n      return [\n        pipe(\n          model,\n          todoByIdOptional(todo._id).set(updated)\n        ),\n        pipe(\n          api.update(updated),\n          cmd.map(Action.Api)\n        )\n      ]\n    },\n    ToggleFav: ({ todo }) => {\n      const updated = { ...todo, isFav: !todo.isFav }\n      return [\n        pipe(\n          model,\n          todoByIdOptional(todo._id).set(updated)\n        ),\n        pipe(\n          api.update(updated),\n          cmd.map(Action.Api)\n        )\n      ]\n    },\n    Remove: ({ todo }) => [\n      model,\n      pipe(\n        api.remove(todo),\n        cmd.map(Action.Api)\n      )\n    ],\n    UpdateText: ({ text }) => [\n      pipe(\n        model,\n        currentTextLens.set(text)\n      ),\n      cmd.none\n    ],\n    default: () => [model, cmd.none]\n  })\n\nconst view = (model: Model) => {\n  // Convert todos record to non empty array and sort it\n  // The result is a Option<Option<NonEmptyArray<Todo>>> type\n  // The most outer Option signalize the loading state. The inner Option signalize if the array is empty or not\n  // and the internal array has at least one Todo element\n  const todos = pipe(\n    model.todos,\n    O.map(todos => NEA.fromArray(sortTodos(Object.values(todos))))\n  )\n  const stats = pipe(\n    todos,\n    O.flatten,\n    O.map(todos => ({\n      done: todos.filter(todo => todo.isDone).length,\n      total: todos.length\n    }))\n  )\n  const isEditing = '_rev' in model.current\n\n  return (dispatch: platform.Dispatch<Action>) => (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <h3 className=\"card-title\">\n          <Title stats={stats} />\n        </h3>\n      </div>\n      <div className=\"card-body\">\n        <TodoForm\n          isEditing={isEditing}\n          value={model.current.text}\n          onChange={text => dispatch(Action.UpdateText({ text }))}\n          onSubmit={() => dispatch(Action.Add())}\n        />\n      </div>\n      <ul className=\"list-group list-group-flush\">\n        {pipe(\n          // Unpacking the todos Option<Option<NonEmptyArray<Todo>>> object\n          todos,\n          O.fold(\n            // If the most outer Option is none the app is loading the todos\n            () => <LoadingTodos />,\n            // Else we most outer Option is some and we need evaluate the inner Option.\n            // Note: `fold` returns a new function that accepts the Option<NonEmptyArray<Todo>> type so the `pipe` call would be redundant\n            O.fold(\n              // If the the inner Option is none the array is empty\n              () => <EmptyTodos />,\n              // Else the todos were loaded and the array is not empty\n              todos => (\n                <>\n                  {todos.map(todo => (\n                    <Todo\n                      key={todo._id}\n                      {...todo}\n                      onEdit={() => dispatch(Action.Edit({ todo }))}\n                      onRemove={() => dispatch(Action.Remove({ todo }))}\n                      onToggleDone={() => dispatch(Action.ToggleDone({ todo }))}\n                      onToggleFav={() => dispatch(Action.ToggleFav({ todo }))}\n                    />\n                  ))}\n                </>\n              )\n            )\n          )\n        )}\n      </ul>\n    </div>\n  )\n}\n\nconst app = html.programWithFlags(init, update, view, model =>\n  pipe(\n    model.todos,\n    O.fold(api.changes.stop, api.changes.start),\n    rx.map(Action.Api)\n  )\n)\n\nhtml.run(\n  app({\n    seed: Date.now() * Math.random()\n  }),\n  dom => {\n    ReactDOM.render(dom, document.getElementById('app'))\n  }\n)\n"],"sourceRoot":""}