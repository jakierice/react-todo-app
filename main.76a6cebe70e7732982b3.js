!function(e){function t(t){for(var r,i,a=t[0],u=t[1],l=t[2],d=0,p=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(s&&s(t);p.length;)p.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={1:0},c=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window.webpackJsonp=window.webpackJsonp||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var s=u;c.push([140,0]),n()}({140:function(e,t,n){"use strict";n.r(t);var r,o=n(101),c=n.n(o),i=n(45),a=n(43),u=n(6),l=n(106),s=n(34),d=n(15),p=n(80),f=n(61),m=n(12),b=n(23),v=n(8),g=n(107),O=function(e){return 16807*e%2147483647},j=n(5),y=function(e){var t=e.stats;return j.createElement(j.Fragment,null,"Simple TodoÂ ",Object(u.pipe)(t,v.fold((function(){return null}),(function(e){var t=e.done,n=e.total;return j.createElement("span",{className:"text-muted small"},t," / ",n)}))))},h=function(e){var t=e.isEditing,n=e.value,r=e.onChange,o=e.onSubmit;return j.createElement("div",{className:"input-group"},j.createElement("input",{type:"text",className:"form-control",name:"task",value:n,onChange:function(e){return r(e.target.value)}}),j.createElement("div",{className:"input-group-append"},j.createElement("button",{type:"submit",className:"btn btn-primary",onClick:o,disabled:""===n},t?"Edit":"Add")))},E=function(){return j.createElement("li",{className:"list-group-item"},j.createElement("em",null,"Task list is empty."))},_=function(){return j.createElement("li",{className:"list-group-item"},j.createElement("em",null,"Loading Tasks..."))},P=n(66),w=n(67),x=n(90),T=function(e){var t=e.isFav,n=e.isDone,r=e.text,o=e.onEdit,c=e.onToggleFav,i=e.onToggleDone,a=e.onRemove;return j.createElement("li",{className:"task-container list-group-item d-flex justify-content-between align-items-center"},j.createElement("div",null,j.createElement("a",{href:"#",className:"btn-left",onClick:c},j.createElement(P.a,{icon:t?w.c:x.b})),j.createElement("a",{href:"#",className:"btn-left",onClick:i},j.createElement(P.a,{icon:n?w.a:x.a})),n?j.createElement("del",{className:"text-muted"},r):r),j.createElement("div",null,j.createElement("a",{href:"#",className:"btn-right",onClick:o},j.createElement(P.a,{icon:w.b})),j.createElement("a",{href:"#",className:"btn-right",onClick:a},j.createElement(P.a,{icon:w.d}))))},A=n(16),D=n(102),N=A.interface({_id:A.string,text:A.string,isDone:A.boolean,isFav:Object(D.withFallback)(A.boolean,!1)},"Todo"),k=function(e){return A.intersection([A.interface({_rev:A.string}),e])},F=A.interface({ok:A.boolean,id:A.string,rev:A.string},"Response"),S=Object(b.a)({Add:Object(b.b)(),Load:Object(b.b)(),Remove:Object(b.b)(),Update:Object(b.b)()}),R=m.http.send(m.http.get("/todos/_all_docs?include_docs=true",(r=N,A.interface({total_rows:A.Int,offset:A.Int,rows:A.array(A.interface({id:A.string,key:A.string,doc:k(r),value:A.interface({rev:A.string})}))},"AllDocsResponse"))),S.Load),C=function(e){return m.http.send(m.http.del("/todos/".concat(e._id,"?_rev=").concat(e._rev),F),(function(t){return S.Remove({todo:e,response:t})}))},L=function(e){return m.http.send(m.http.put("/todos/".concat(e._id,"?rev=").concat(e._rev),k(N).encode(e),F),(function(t){return S.Update({todo:e,response:t})}))},M=n(103),U=n.n(M),I=n(104);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(e){return{_id:U.a.v1({msecs:e}),text:"",isDone:!1,isFav:!1}},q=Object(i.contramap)((function(e){return e.text}))(i.ordString),z=Object(i.contramap)((function(e){return e.isDone}))(i.ordBoolean),G=Object(i.getSemigroup)().concat(z,q),H=f.sort(G),K=a.fromFoldableMap(Object(p.getFirstSemigroup)(),f.array),Q=s.b.fromProp()("current"),V=Q.composeLens(s.b.fromProp()("text")),X=s.b.fromProp()("seed"),Y=s.b.fromProp()("todos"),Z=Y.composePrism(s.c.some()),$=function(e){return Z.composeLens(Object(l.a)().at(String(e))).composePrism(s.c.some())},ee=Object(b.a)({Api:Object(b.b)(),Add:Object(b.b)(),Edit:Object(b.b)(),ToggleDone:Object(b.b)(),ToggleFav:Object(b.b)(),Remove:Object(b.b)(),UpdateText:Object(b.b)()}),te=m.html.programWithFlags((function(e){var t=function(e){var t=e%2147483647;return t<=0?t+2147483646:t}(e.seed);return[{seed:O(t),current:W(t),todos:v.none},Object(u.pipe)(R,m.cmd.map(ee.Api))]}),(function(e,t){return ee.match(e,{Api:function(e){return S.match(e,{Add:function(e){var n=e.todo,r=e.response;return Object(u.pipe)(r,d.fold((function(){return[t,m.cmd.none]}),(function(e){return[Object(u.pipe)(t,X.modify(O),Q.set(W(t.seed)),Z.modify(a.insertAt(e.body.id,J({},n,{_rev:e.body.rev})))),m.cmd.none]})))},Load:function(e){return Object(u.pipe)(e,d.fold((function(){return[t,m.cmd.none]}),(function(e){var n=e.body.rows.map((function(e){return e.doc})),r=K(n,(function(e){return[e._id,e]}));return[Object(u.pipe)(t,Y.set(v.some(r))),m.cmd.none]})))},Remove:function(e){var n=e.todo,r=e.response;return Object(u.pipe)(r,d.fold((function(){return[t,m.cmd.none]}),(function(){return[Object(u.pipe)(t,Z.modify(a.deleteAt(n._id))),m.cmd.none]})))},Update:function(e){var n=e.todo,r=e.response;return Object(u.pipe)(r,d.fold((function(){return[t,m.cmd.none]}),(function(e){return[Object(u.pipe)(t,(r=n._id,$(r).composeLens(s.b.fromProp()("_rev"))).set(e.body.rev)),m.cmd.none];var r})))}})},Add:function(){return[Object(u.pipe)(t,X.modify(O),Q.set(W(t.seed))),Object(u.pipe)((e=t.current,m.http.send(m.http.post("/todos",N.encode(e),F),(function(t){return S.Add({todo:e,response:t})}))),m.cmd.map(ee.Api))];var e},Edit:function(e){var n=e.todo;return[Object(u.pipe)(t,Q.set(n)),m.cmd.none]},ToggleDone:function(e){var n=e.todo,r=J({},n,{isDone:!n.isDone});return[Object(u.pipe)(t,$(n._id).set(r)),Object(u.pipe)(L(r),m.cmd.map(ee.Api))]},ToggleFav:function(e){var n=e.todo,r=J({},n,{isFav:!n.isFav});return[Object(u.pipe)(t,$(n._id).set(r)),Object(u.pipe)(L(r),m.cmd.map(ee.Api))]},Remove:function(e){var n=e.todo;return[t,Object(u.pipe)(C(n),m.cmd.map(ee.Api))]},UpdateText:function(e){var n=e.text;return[Object(u.pipe)(t,V.set(n)),m.cmd.none]},default:function(){return[t,m.cmd.none]}})}),(function(e){var t=Object(u.pipe)(e.todos,v.map((function(e){return g.fromArray(H(Object.values(e)))}))),n=Object(u.pipe)(t,v.flatten,v.map((function(e){return{done:e.filter((function(e){return e.isDone})).length,total:e.length}}))),r="_rev"in e.current;return function(o){return j.createElement("div",{className:"card"},j.createElement("div",{className:"card-header"},j.createElement("h3",{className:"card-title"},j.createElement(y,{stats:n}))),j.createElement("div",{className:"card-body"},j.createElement(h,{isEditing:r,value:e.current.text,onChange:function(e){return o(ee.UpdateText({text:e}))},onSubmit:function(){return o(ee.Add())}})),j.createElement("ul",{className:"list-group list-group-flush"},Object(u.pipe)(t,v.fold((function(){return j.createElement(_,null)}),v.fold((function(){return j.createElement(E,null)}),(function(e){return j.createElement(j.Fragment,null,e.map((function(e){return j.createElement(T,Object.assign({key:e._id},e,{onEdit:function(){return o(ee.Edit({todo:e}))},onRemove:function(){return o(ee.Remove({todo:e}))},onToggleDone:function(){return o(ee.ToggleDone({todo:e}))},onToggleFav:function(){return o(ee.ToggleFav({todo:e}))}}))})))}))))))}}));m.html.run(te({seed:Date.now()*Math.random()}),(function(e){I.render(e,document.getElementById("app"))}))}});
//# sourceMappingURL=main.76a6cebe70e7732982b3.js.map